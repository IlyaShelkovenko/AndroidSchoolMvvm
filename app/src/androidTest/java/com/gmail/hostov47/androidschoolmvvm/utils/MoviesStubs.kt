/**
 * Created by Ilia Shelkovenko on 12.09.2021.
 */

package com.gmail.hostov47.androidschoolmvvm.utils

import com.gmail.hostov47.androidschoolmvvm.data.local.db.entyties.MovieLocal
import com.gmail.hostov47.androidschoolmvvm.data.mappers.FromMovieToMovieLocalMapper
import com.gmail.hostov47.androidschoolmvvm.models.data.dto.MoviesResponse
import com.google.gson.GsonBuilder
import kotlinx.serialization.decodeFromString
import kotlinx.serialization.json.Json
import java.io.File
import java.io.FileReader

val json = Json {
    ignoreUnknownKeys = true
}

fun getMovies(): MoviesResponse {
    return json.decodeFromString("""
    {"page":1,"results":[{"adult":false,"backdrop_path":"/6EdKBYkB1ssgGjc249ud1L55o8d.jpg","genre_ids":[28,878,53],"id":848278,"original_language":"en","original_title":"Jurassic Hunt","overview":"Группа богачей охотников отправляется в тайный заповедник, где им за большие деньги позволяют поохотиться на динозавров. Но они ещё не подозревают, что настоящая добыча в этом аттракционе - это они сами.","popularity":2973.319,"poster_path":"/CGJAj5kNWQZypNgUSTTQrFlnG.jpg","release_date":"2021-08-23","title":"Юрская охота","video":false,"vote_average":4.6,"vote_count":41},{"adult":false,"backdrop_path":"/pUc51UUQb1lMLVVkDCaZVsCo37U.jpg","genre_ids":[53,27],"id":482373,"original_language":"en","original_title":"Don't Breathe 2","overview":"Спустя несколько лет после кровавого вторжения Норман обрел покой и утешение, но оказалось, что от прошлых грехов так просто не убежишь.","popularity":2935.743,"poster_path":"/6GJK0SnH5w3eX6gQRPTKio85GnU.jpg","release_date":"2021-08-12","title":"Не дыши 2","video":false,"vote_average":7.6,"vote_count":433},{"adult":false,"backdrop_path":"/nDLylQOoIazGyYuWhk21Yww5FCb.jpg","genre_ids":[28,12,14],"id":566525,"original_language":"en","original_title":"Shang-Chi and the Legend of the Ten Rings","overview":"Мастеру боевых искусств Шан-Чи предстоит противостоять призракам из собственного прошлого, по мере того как его втягивают в паутину интриг таинственной организации «Десять колец».","popularity":2872.93,"poster_path":"/klxQoepkfLR021DWy2Rpy67mgww.jpg","release_date":"2021-09-01","title":"Шан-Чи и легенда десяти колец","video":false,"vote_average":8,"vote_count":584},{"adult":false,"backdrop_path":"/yizL4cEKsVvl17Wc1mGEIrQtM2F.jpg","genre_ids":[28,878,12],"id":588228,"original_language":"en","original_title":"The Tomorrow War","overview":"В будущем идёт разрушительный конфликт с инопланетной расой. В попытке переломить ход войны учёные начинают призывать в свою армию солдат из прошлого.","popularity":2823.993,"poster_path":"/jdzuxuA05lW4DzedZqa43SYhaZ.jpg","release_date":"2021-09-03","title":"Война будущего","video":false,"vote_average":7.7,"vote_count":331},{"adult":false,"backdrop_path":"/jlGmlFOcfo8n5tURmhC7YVd4Iyy.jpg","genre_ids":[28,12,14,35],"id":436969,"original_language":"en","original_title":"The Suicide Squad","overview":"Отобрав наиболее перспективных заключенных из тюрьмы, в которой содержатся не только самые опасные преступники, но и люди со свехрспособностями, и даже не люди, правительственный агент отправляет их на самоубийственное задание в одну латиноамериканскую страну, где недавно произошел военный переворот. А чтобы те наверняка не сбежали, каждому в голову вживляется взрывное устройство.","popularity":2277.654,"poster_path":"/sbN2HoS2kzKS1qGSeCJXzABuTyk.jpg","release_date":"2021-07-28","title":"Отряд самоубийц: Миссия навылет","video":false,"vote_average":8,"vote_count":3628},{"adult":false,"backdrop_path":"/zHHcindG4uVZLPLuYWoo4rnv6Ti.jpg","genre_ids":[28,53],"id":595743,"original_language":"en","original_title":"SAS: Red Notice","overview":"Том - спецагент, который всё никак не может выкроить времени на свою девушку. Когда он наконец решает сделать ей предложение, в его планы вмешивается небольшая частная группировка, которая угоняет поезд под Ла-Маншем, на котором они едут в Париж.","popularity":2235.717,"poster_path":"/yTzdqtjYXHqRA0lt1Tau8PLuRrJ.jpg","release_date":"2021-08-11","title":"Спецслужба: Сигнал тревоги","video":false,"vote_average":6,"vote_count":115},{"adult":false,"backdrop_path":"/849RDhbADVVnhtggR14dDBYejeN.jpg","genre_ids":[14,10749,35],"id":593910,"original_language":"en","original_title":"Cinderella","overview":"Современное переосмысление традиционной сказки о девочке-сироте и злой мачехе.","popularity":1826.18,"poster_path":"/7U2H1ZwURMsEaA6aCYzwh51M0cF.jpg","release_date":"2021-09-03","title":"Золушка","video":false,"vote_average":6.9,"vote_count":437},{"adult":false,"backdrop_path":"/uRkRJjrxVa04w7k83Hy20FKot4G.jpg","genre_ids":[28],"id":859041,"original_language":"en","original_title":"Crazy Fist","overview":"","popularity":1810.846,"poster_path":"/z21p0pm82RbHrUyHj8Mu4tOEun5.jpg","release_date":"2021-08-06","title":"Crazy Fist","video":false,"vote_average":7.7,"vote_count":20},{"adult":false,"backdrop_path":"/7WJjFviFBffEJvkAms4uWwbcVUk.jpg","genre_ids":[12,14,35,28],"id":451048,"original_language":"en","original_title":"Jungle Cruise","overview":"Отважная исследовательница дикой природы Лили Хоутон намерена отправиться в верховья Амазонки, чтобы найти легендарное дерево, которое – согласно преданиям южноамериканских индейских племен – обладает магическими целебными свойствами. Сопровождать Лили будут её утонченный брат Макгрегор и бесшабашный капитан круизного пароходика Фрэнк. В дебрях джунглей путников будут подстерегать не только смертельно опасные представители амазонской флоры и фауны, но и ловушки, подстроенные участниками конкурирующей экспедиции, и даже встречи со сверхъестественным.","popularity":1704.972,"poster_path":"/t6PpKQfjQmotvC9b2YeNTaTwMd.jpg","release_date":"2021-07-28","title":"Круиз по джунглям","video":false,"vote_average":7.9,"vote_count":2473},{"adult":false,"backdrop_path":"/mtRW6eAwOO27h3zrfU2foQFW7Hg.jpg","genre_ids":[16,10751,12,35],"id":675445,"original_language":"en","original_title":"PAW Patrol: The Movie","overview":"Когда злодей Хамдингер становится мэром города Приключений, бесстрашные щенки бросают ему вызов. Райдера с друзьями ждут опасности и веселье, тайны прошлого и новые знакомства — так, к патрулю присоединяется находчивая такса Либерти. Вооружившись новыми гаджетами, смекалкой и дружбой, команда хвостатых героев готова противостоять Хамдингеру и спасти жителей города Приключений.","popularity":1530.973,"poster_path":"/yoIw8l9XO4btmHtg73b7ttzknJW.jpg","release_date":"2021-08-09","title":"Щенячий патруль в кино","video":false,"vote_average":8,"vote_count":381},{"adult":false,"backdrop_path":"/dq18nCTTLpy9PmtzZI6Y2yAgdw5.jpg","genre_ids":[28,12,53,878],"id":497698,"original_language":"en","original_title":"Black Widow","overview":"Наташе Романофф предстоит лицом к лицу встретиться со своим прошлым. Чёрной Вдове придется вспомнить о том, что было в её жизни задолго до присоединения к команде Мстителей, и узнать об опасном заговоре, в который оказываются втянуты её старые знакомые — Елена, Алексей (известный как Красный Страж) и Мелина.","popularity":1523.169,"poster_path":"/mbtN6V6y5kdawvAkzqN4ohi576a.jpg","release_date":"2021-07-07","title":"Чёрная вдова","video":false,"vote_average":7.8,"vote_count":4875},{"adult":false,"backdrop_path":"/dssCw0mUmD4EriUmkwB3PnsGu4q.jpg","genre_ids":[16,28,14],"id":841755,"original_language":"en","original_title":"Mortal Kombat Legends: Battle of the Realms","overview":"Райден с лучшими воинами — Лю Каном, Джонни Кейджем, Соней Блейд и Джаксом — возвращаются на Землю и обнаруживают там армии Внешнего мира. Сам Император Шао Кан предстает перед бойцами, чтобы поставить им очередной ультиматум — или новая Смертельная Битва, или его армии начинают захватывать планету, уничтожая все на своем пути.","popularity":1478.113,"poster_path":"/sBVdNKGN6kItTwABJwfutb2KnkP.jpg","release_date":"2021-08-30","title":"Легенды «Смертельной битвы»: Сражение миров","video":false,"vote_average":8.2,"vote_count":89},{"adult":false,"backdrop_path":"/8s4h9friP6Ci3adRGahHARVd76E.jpg","genre_ids":[16,35,10751,878],"id":379686,"original_language":"en","original_title":"Space Jam: A New Legacy","overview":"Чтобы спасти сына, знаменитый чемпион НБА отправляется в сказочный мир, где в команде мультяшек вынужден сражаться на баскетбольной площадке с цифровыми копиями знаменитых игроков.","popularity":1467.039,"poster_path":"/jp03RHaZqd264DZBqLfooPDnlBE.jpg","release_date":"2021-07-08","title":"Космический джем: Новое поколение","video":false,"vote_average":7.4,"vote_count":2113},{"adult":false,"backdrop_path":"/nprqOIEfiMMQx16lgKeLf3rmPrR.jpg","genre_ids":[28,53,18],"id":619297,"original_language":"en","original_title":"Sweet Girl","overview":"Отец остался один с дочкой после убийства жены неизвестными. Не в силах ждать, пока полиция расследует дело, он клянется сам найти и покарать преступников.","popularity":1451.291,"poster_path":"/4KCtumjrr5pNHR2d8wUcoIwQtgw.jpg","release_date":"2021-08-18","title":"Малышка","video":false,"vote_average":6.9,"vote_count":492},{"adult":false,"backdrop_path":"/qD45xHA35HdJDGOaA1AgDwiWEgO.jpg","genre_ids":[10749,18],"id":744275,"original_language":"en","original_title":"After We Fell","overview":"Встреча с притягательным бунтарем Хардином разделила жизнь Тессы на «до» и «после». Их судьбы кажутся неразрывно связанными, но Тесса сталкивается со сложным выбором: согласиться на работу мечты в крупном издательстве или переехать в Лондон вместе с Хардином. Их страстную любовь ждет проверка на прочность: тайны прошлого, новые секреты и ответ на вопрос, что они на самом деле значат друг для друга…","popularity":1210.635,"poster_path":"/A3joKPG7NSNuwA0TKNxanprSsOf.jpg","release_date":"2021-09-01","title":"После. Глава 3","video":false,"vote_average":8.6,"vote_count":194},{"adult":false,"backdrop_path":"/AjQgFtfXTmmMVuaH2VfQDdGbeQH.jpg","genre_ids":[28,18,80],"id":706972,"original_language":"en","original_title":"Narco Sub","overview":"Возрождение карибских нарко-маршрутов приводит к власти пару в стиле Бонни и Клайда.","popularity":1202.636,"poster_path":"/7p0O4mKYLIhU2E5Zcq9Z3vOZ4e9.jpg","release_date":"2021-07-22","title":"Война наркокартелей","video":false,"vote_average":7.1,"vote_count":49},{"adult":false,"backdrop_path":"/1Txzm4bY5ZDqvgMl7MmHeBMl7HH.jpg","genre_ids":[80,18,53],"id":860425,"original_language":"es","original_title":"Sinaliento","overview":"В Доминиканской Республике закаленный полицейский Маноло пытается уничтожить печально известный наркокартель. Тем временем его дочь влюбилась в Лоренцо, строителя, который бессознательно участвовал в сделках с наркокартелями.","popularity":1143.298,"poster_path":"/oxNoVgbu2v9ETL93Kri1pw8osYf.jpg","release_date":"2021-08-11","title":"Сигнал","video":false,"vote_average":6.7,"vote_count":21},{"adult":false,"backdrop_path":"/620hnMVLu6RSZW6a5rwO8gqpt0t.jpg","genre_ids":[16,35,10751,14],"id":508943,"original_language":"en","original_title":"Luca","overview":"Незабываемые каникулы, в которых есть место и домашней пасте, и мороженому, и бесконечным поездкам на мопеде, мальчик по имени Лука проводит в красивом приморском городке, расположенном на итальянской Ривьере. Ни одно приключение Луки не обходится без участия его нового лучшего друга, и беззаботность отдыха омрачает только лишь тот факт, что на самом деле в облике мальчика скрывается морской монстр из глубин лагуны, на берегу которой стоит городок.","popularity":1126.098,"poster_path":"/e6kgKkagZWKKQcsAG2OBj88NAB0.jpg","release_date":"2021-06-17","title":"Лука","video":false,"vote_average":8.1,"vote_count":4387},{"adult":false,"backdrop_path":"/8Y43POKjjKDGI9MH89NW0NAzzp8.jpg","genre_ids":[35,28,12,878],"id":550988,"original_language":"en","original_title":"Free Guy","overview":"У сотрудника крупного банка всё идёт по накатанной, пока однажды он не выясняет, что окружающий его мир — это часть огромной видеоигры, а сам он в ней — всего лишь второстепенный персонаж. Хватит ли у него духу переписать свой код, обратить на себя внимание прекрасной девушки и, наконец, спасти мир? Одним словом, получится ли из него главный герой?","popularity":1079.301,"poster_path":"/21M3oZXEuWzO2lURpbLvulxDxaK.jpg","release_date":"2021-08-11","title":"Главный герой","video":false,"vote_average":7.8,"vote_count":594},{"adult":false,"backdrop_path":"/xXHZeb1yhJvnSHPzZDqee0zfMb6.jpg","genre_ids":[28,80,53],"id":385128,"original_language":"en","original_title":"F9","overview":"Доминик Торетто ведет спокойную жизнь вместе с Летти и сыном Брайаном, но новая опасность всегда где-то рядом. В этот раз Доминику придется встретиться с призраками прошлого, если он хочет спасти самых близких. Команда снова собирается вместе, чтобы предотвратить дерзкий план по захвату мира, который придумал самый опасный преступник и безбашенный водитель из всех, с кем они сталкивались ранее. Ситуация усложняется тем, что этот человек — брат Доминика Джейкоб, которого много лет назад изгнали из семьи.","popularity":1070.289,"poster_path":"/mfccq2gRX7xDwzRxjrW6mUQSzD8.jpg","release_date":"2021-05-19","title":"Форсаж 9","video":false,"vote_average":7.5,"vote_count":3505}],"total_pages":500,"total_results":10000}
""".trimIndent())
}

val moviesLocal: List<MovieLocal> = FromMovieToMovieLocalMapper.mapList(getMovies().results)

val moviesLocalPopularCategory: List<MovieLocal> = moviesLocal
    .map {
        if(it.voteAverage != null && it.voteAverage!! > 5.5)
            it.isPopular = true
        it
    }

val moviesLocalUpcomingCategory: List<MovieLocal> = moviesLocal
    .map {
        if(it.voteAverage != null && it.voteAverage!! > 8)
            it.isUpcoming = true
        it
    }


val moviesLocalNowPlayingCategory: List<MovieLocal> = moviesLocal
    .map {
        if(it.voteAverage != null && it.voteAverage!! > 6.5)
            it.isNowPlaying = true
        it
    }